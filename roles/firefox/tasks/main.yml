---
- name: Install Firefox
  pacman:
    name: firefox
  become_user: root

- name: Create config directories
  file:
    path: '{{ user_dir }}/.mozilla/firefox'
    state: directory
    recurse: yes

- name: Configure profiles
  template:
    src: profiles.ini.j2
    dest: '{{ user_dir }}/.mozilla/firefox/profiles.ini'

- name: Configure Firefox's GUI
  copy:
    src: userChrome.css
    dest: '{{ user_dir }}/.mozilla/firefox/{{ profile_dir }}.default/chrome/'

# Manual steps to get back Firefox as I want it:
#  - import vimium configs (in files/vimium) through the interface
#  - import userstyles (ncloud:Misc/userstyles.bin) through their interface
#  - change Tab Session Manager's settings
#    - Uncheck 'Save the session regularly'
#    - Change Date format to DD/MM/YYYY HH:mm:ss
#  - customize GUI
#  - make DuckDuckGo the default search engine at 'about:preferences#search'
#  - configure the bitwarden extension to enable auto-fill
#  - block requests to allow notifications at 'about:preferences#privacey' -> Permissions -> Notifications
