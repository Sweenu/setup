---
- name: Configure logind
  lineinfile:
    path: /etc/systemd/logind.conf
    regexp: '^#?{{ item.option }}='
    line: '{{ item.option }}={{ item.value }}'
  become: true
  notify: Restart logind
  loop:
    - { option: 'HandlePowerKey', value: 'ignore' }
    - { option: 'HandleLidSwitch', value: 'suspend' }
    - { option: 'HandleLidSwitchDocked', value: 'suspend' }
